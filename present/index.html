<!DOCTYPE html>
<html>
    <head>
        <title>Azavea Pecha Kucha</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/white.min.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides"></div>
        </div>
        <script>
            const usp = new URLSearchParams(window.location.search);
            const numslides = usp.get('numslides') || 20;
            const bgcolor = usp.get('bgcolor') || '#fff';
            const user = usp.get('user');
            const repo = usp.get('repo');
            const slides = document.querySelector('.reveal > .slides');

            if (!(user && repo)) {
                throw "User or repository unspecified";
            }

            for (let i = 0; i < numslides; i++) {
                const slide = document.createElement('section');
                slide.setAttribute(
                    'data-background-size',
                    'contain'
                );
                slide.setAttribute(
                    'data-background-color',
                    bgcolor
                );
                slide.setAttribute(
                    'data-background-image',
                    `https://github.com/${user}/${repo}/raw/master/${i+1}.jpg`
                );

                slides.appendChild(slide);
            }
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.min.js"></script>
        <script>
            const delay = usp.get('delay');
            Reveal.initialize({
                autoSlide: (delay && delay * 1000) || 5000,
                autoSlideStoppable: false,
                slideNumber: true,
            });
        </script>
    </body>
</html>
